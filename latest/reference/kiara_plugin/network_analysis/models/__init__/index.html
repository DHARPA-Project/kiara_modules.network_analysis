
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Markus Binsteiner">
      
      
      
        <link rel="prev" href="../../defaults/">
      
      
        <link rel="next" href="../inputs/">
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.19">
    
    
      
        <title>models - kiara_plugin.network_analysis</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.eebd395e.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kiara_plugin.network_analysis.models" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="kiara_plugin.network_analysis" class="md-header__button md-logo" aria-label="kiara_plugin.network_analysis" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            kiara_plugin.network_analysis
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              models
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/DHARPA-Project/kiara_plugin.network_analysis" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="kiara_plugin.network_analysis" class="md-nav__button md-logo" aria-label="kiara_plugin.network_analysis" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    kiara_plugin.network_analysis
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DHARPA-Project/kiara_plugin.network_analysis" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Package contents
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Package contents
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../info/data_types/" class="md-nav__link">
        data_types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../info/module_types/" class="md-nav__link">
        module_types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../info/kiara_model_types/" class="md-nav__link">
        kiara_model_types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../info/operations/" class="md-nav__link">
        operations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../development/" class="md-nav__link">
        Development
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          API reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          API reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
          kiara_plugin
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          kiara_plugin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1" checked>
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../__init__/">network_analysis</a>
          
            <label for="__nav_5_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5_1_1">
          <span class="md-nav__icon md-icon"></span>
          network_analysis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_types/" class="md-nav__link">
        data_types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../defaults/" class="md-nav__link">
        defaults
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1_3" checked>
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index md-nav__link--active">
          <a href="./">models</a>
          
            <label for="__nav_5_1_1_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_1_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5_1_1_3">
          <span class="md-nav__icon md-icon"></span>
          models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../inputs/" class="md-nav__link">
        inputs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metadata/" class="md-nav__link">
        metadata
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1_4" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../modules/__init__/">modules</a>
          
            <label for="__nav_5_1_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_1_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_1_1_4">
          <span class="md-nav__icon md-icon"></span>
          modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/components/" class="md-nav__link">
        components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/create/" class="md-nav__link">
        create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/export/" class="md-nav__link">
        export
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/filters/" class="md-nav__link">
        filters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/rendering/" class="md-nav__link">
        rendering
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pipelines/__init__/" class="md-nav__link">
        pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1_6" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../streamlit/__init__/">streamlit</a>
          
            <label for="__nav_5_1_1_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_1_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_1_1_6">
          <span class="md-nav__icon md-icon"></span>
          streamlit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1_6_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../streamlit/components/__init__/">components</a>
          
            <label for="__nav_5_1_1_6_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_1_1_6_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_1_1_6_1">
          <span class="md-nav__icon md-icon"></span>
          components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../streamlit/components/data_import/" class="md-nav__link">
        data_import
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models" class="md-nav__link">
    kiara_plugin.network_analysis.models
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NETWORKX_GRAPH_TYPE" class="md-nav__link">
    NETWORKX_GRAPH_TYPE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.RUSTWORKX_GRAPH_TYPE" class="md-nav__link">
    RUSTWORKX_GRAPH_TYPE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NodesCallback" class="md-nav__link">
    NodesCallback
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.EdgesCallback" class="md-nav__link">
    EdgesCallback
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData" class="md-nav__link">
    NetworkData
  </a>
  
    <nav class="md-nav" aria-label="NetworkData">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.edges" class="md-nav__link">
    edges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.nodes" class="md-nav__link">
    nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.num_nodes" class="md-nav__link">
    num_nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.num_edges" class="md-nav__link">
    num_edges
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.create_network_data" class="md-nav__link">
    create_network_data()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.from_filtered_nodes" class="md-nav__link">
    from_filtered_nodes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.create_from_networkx_graph" class="md-nav__link">
    create_from_networkx_graph()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.query_edges" class="md-nav__link">
    query_edges()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.query_nodes" class="md-nav__link">
    query_nodes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.retrieve_graph_data" class="md-nav__link">
    retrieve_graph_data()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.as_networkx_graph" class="md-nav__link">
    as_networkx_graph()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkData.as_rustworkx_graph" class="md-nav__link">
    as_rustworkx_graph()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.GraphProperties" class="md-nav__link">
    GraphProperties
  </a>
  
    <nav class="md-nav" aria-label="GraphProperties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.GraphProperties-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.GraphProperties.number_of_edges" class="md-nav__link">
    number_of_edges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.GraphProperties.parallel_edges" class="md-nav__link">
    parallel_edges
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties" class="md-nav__link">
    NetworkGraphProperties
  </a>
  
    <nav class="md-nav" aria-label="NetworkGraphProperties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties.number_of_nodes" class="md-nav__link">
    number_of_nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties.properties_by_graph_type" class="md-nav__link">
    properties_by_graph_type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties.number_of_self_loops" class="md-nav__link">
    number_of_self_loops
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties.retrieve_supported_data_types" class="md-nav__link">
    retrieve_supported_data_types()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties.create_value_metadata" class="md-nav__link">
    create_value_metadata()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara_plugin.network_analysis.models-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>models</h1>

<div class="doc doc-object doc-module">


<a id="kiara_plugin.network_analysis.models"></a>
  <div class="doc doc-contents first">
  
      <p>This module contains the metadata (and other) models that are used in the <code>kiara_plugin.network_analysis</code> package.</p>
<p>Those models are convenience wrappers that make it easier for <em>kiara</em> to find, create, manage and version metadata -- but also
other type of models -- that is attached to data, as well as <em>kiara</em> modules.</p>
<p>Metadata models must be a sub-class of [kiara.metadata.MetadataModel][]. Other models usually
sub-class a pydantic BaseModel or implement custom base classes.</p>

  

  <div class="doc doc-children">





<h2 id="kiara_plugin.network_analysis.models-attributes">Attributes<a href="#kiara_plugin.network_analysis.models-attributes" class="headerlink" title="Permanent link">&para;</a></h2>

<div class="doc doc-object doc-attribute">



<h3 id="kiara_plugin.network_analysis.models.NETWORKX_GRAPH_TYPE" class="doc doc-heading">
<code class="highlight language-python"><span class="n">NETWORKX_GRAPH_TYPE</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;NETWORKX_GRAPH_TYPE&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="s1">&#39;nx.Graph&#39;</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NETWORKX_GRAPH_TYPE" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="kiara_plugin.network_analysis.models.RUSTWORKX_GRAPH_TYPE" class="doc doc-heading">
<code class="highlight language-python"><span class="n">RUSTWORKX_GRAPH_TYPE</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;RUSTWORKX_GRAPH_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;rx.PyGraph&#39;</span><span class="p">,</span> <span class="s1">&#39;rx.PyDiGraph&#39;</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.RUSTWORKX_GRAPH_TYPE" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>
<h2 id="kiara_plugin.network_analysis.models-classes">Classes<a href="#kiara_plugin.network_analysis.models-classes" class="headerlink" title="Permanent link">&para;</a></h2>

<div class="doc doc-object doc-class">



<h3 id="kiara_plugin.network_analysis.models.NodesCallback" class="doc doc-heading">
          <code>NodesCallback</code>


<a href="#kiara_plugin.network_analysis.models.NodesCallback" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="typing.Protocol">Protocol</span></code></p>


            <details class="quote">
              <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">NodesCallback</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_node_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="kiara_plugin.network_analysis.models.EdgesCallback" class="doc doc-heading">
          <code>EdgesCallback</code>


<a href="#kiara_plugin.network_analysis.models.EdgesCallback" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="typing.Protocol">Protocol</span></code></p>


            <details class="quote">
              <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EdgesCallback</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_source</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">_target</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="kiara_plugin.network_analysis.models.NetworkData" class="doc doc-heading">
          <code>NetworkData</code>


<a href="#kiara_plugin.network_analysis.models.NetworkData" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-external" title="kiara_plugin.tabular.models.tables.KiaraTables" href="https://dharpa.org/kiara_plugin.tabular/latest/reference/kiara_plugin/tabular/models/tables/#kiara_plugin.tabular.models.tables.KiaraTables">KiaraTables</a></code></p>

  
      <p>A helper class to access and query network datasets.</p>
<p>This class provides different ways to access the underlying network data, most notably via sql and as networkx Graph object.</p>
<p>Internally, network data is stored as 2 Arrow tables with the edges stored in a table called 'edges' and the nodes in a table called 'nodes'. The edges table must have (at least) the following columns: '_source', '_target'. The nodes table must have (at least) the following columns: '_id' (integer), '_label' (string).</p>
<p>By convention, kiara will add columns prefixed with an underscore if the values in it have internal 'meaning', normal/original attributes are stored in columns without that prefix.</p>

            <details class="quote">
              <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">NetworkData</span><span class="p">(</span><span class="n">KiaraTables</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A helper class to access and query network datasets.</span>

<span class="sd">    This class provides different ways to access the underlying network data, most notably via sql and as networkx Graph object.</span>

<span class="sd">    Internally, network data is stored as 2 Arrow tables with the edges stored in a table called &#39;edges&#39; and the nodes in a table called &#39;nodes&#39;. The edges table must have (at least) the following columns: &#39;_source&#39;, &#39;_target&#39;. The nodes table must have (at least) the following columns: &#39;_id&#39; (integer), &#39;_label&#39; (string).</span>

<span class="sd">    By convention, kiara will add columns prefixed with an underscore if the values in it have internal &#39;meaning&#39;, normal/original attributes are stored in columns without that prefix.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_kiara_model_id</span> <span class="o">=</span> <span class="s2">&quot;instance.network_data&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_network_data</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">nodes_table</span><span class="p">:</span> <span class="s2">&quot;pa.Table&quot;</span><span class="p">,</span>
        <span class="n">edges_table</span><span class="p">:</span> <span class="s2">&quot;pa.Table&quot;</span><span class="p">,</span>
        <span class="n">augment_tables</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">nodes_column_metadata</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraModel</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">edges_column_metadata</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraModel</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NetworkData&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a `NetworkData` instance from two Arrow tables.</span>

<span class="sd">        This method requires the nodes to have an &quot;_id&#39; column (int) as well as a &#39;_label&#39; one (utf8).</span>
<span class="sd">        The edges table needs at least a &#39;_source&#39; (int) and &#39;_target&#39; (int) column.</span>

<span class="sd">        This method will augment both tables with additional columns that are required for the internal representation (weights, degrees).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">kiara_plugin.network_analysis.models.metadata</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">EDGE_COUNT_DUP_DIRECTED_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">EDGE_COUNT_DUP_UNDIRECTED_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">EDGE_ID_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">EDGE_IDX_DUP_DIRECTED_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">EDGE_IDX_DUP_UNDIRECTED_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">EDGE_SOURCE_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">EDGE_TARGET_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">NODE_COUND_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">NODE_COUNT_EDGES_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">NODE_COUNT_IN_EDGES_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">NODE_COUNT_IN_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">NODE_COUNT_OUT_EDGES_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">NODE_COUNT_OUT_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">NODE_ID_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">NODE_LABEL_COLUMN_METADATA</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">augment_tables</span><span class="p">:</span>
            <span class="n">edges_table</span> <span class="o">=</span> <span class="n">augment_edges_table_with_id_and_weights</span><span class="p">(</span><span class="n">edges_table</span><span class="p">)</span>
            <span class="n">nodes_table</span> <span class="o">=</span> <span class="n">augment_nodes_table_with_connection_counts</span><span class="p">(</span>
                <span class="n">nodes_table</span><span class="p">,</span> <span class="n">edges_table</span>
            <span class="p">)</span>

        <span class="n">network_data</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create_tables</span><span class="p">(</span>
            <span class="p">{</span><span class="n">NODES_TABLE_NAME</span><span class="p">:</span> <span class="n">nodes_table</span><span class="p">,</span> <span class="n">EDGES_TABLE_NAME</span><span class="p">:</span> <span class="n">edges_table</span><span class="p">}</span>
        <span class="p">)</span>

        <span class="c1"># set default column metadata</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">EDGE_ID_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">EDGE_ID_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">SOURCE_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">EDGE_SOURCE_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">TARGET_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">EDGE_TARGET_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">COUNT_DIRECTED_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">EDGE_COUNT_DUP_DIRECTED_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">COUNT_IDX_DIRECTED_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">EDGE_IDX_DUP_DIRECTED_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">COUNT_UNDIRECTED_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">EDGE_COUNT_DUP_UNDIRECTED_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">COUNT_IDX_UNDIRECTED_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">EDGE_IDX_DUP_UNDIRECTED_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">NODE_ID_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">NODE_ID_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">LABEL_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">NODE_LABEL_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">CONNECTIONS_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">NODE_COUNT_EDGES_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">CONNECTIONS_MULTI_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">NODE_COUND_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">IN_DIRECTED_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">NODE_COUNT_IN_EDGES_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">IN_DIRECTED_MULTI_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">NODE_COUNT_IN_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">OUT_DIRECTED_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">NODE_COUNT_OUT_EDGES_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
            <span class="n">OUT_DIRECTED_MULTI_COLUMN_NAME</span><span class="p">,</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
            <span class="n">NODE_COUNT_OUT_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
            <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">nodes_column_metadata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">col_name</span><span class="p">,</span> <span class="n">col_meta</span> <span class="ow">in</span> <span class="n">nodes_column_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">prop_value</span> <span class="ow">in</span> <span class="n">col_meta</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
                        <span class="n">col_name</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">prop_value</span><span class="p">,</span> <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">True</span>
                    <span class="p">)</span>
        <span class="k">if</span> <span class="n">edges_column_metadata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">col_name</span><span class="p">,</span> <span class="n">col_meta</span> <span class="ow">in</span> <span class="n">edges_column_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">prop_value</span> <span class="ow">in</span> <span class="n">col_meta</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
                        <span class="n">col_name</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">prop_value</span><span class="p">,</span> <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">True</span>
                    <span class="p">)</span>

        <span class="k">return</span> <span class="n">network_data</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_filtered_nodes</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">network_data</span><span class="p">:</span> <span class="s2">&quot;NetworkData&quot;</span><span class="p">,</span> <span class="n">nodes_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NetworkData&quot;</span><span class="p">:</span>

        <span class="kn">import</span> <span class="nn">duckdb</span>
        <span class="kn">import</span> <span class="nn">polars</span> <span class="k">as</span> <span class="nn">pl</span>

        <span class="n">node_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">,</span> <span class="n">LABEL_COLUMN_NAME</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">column_name</span><span class="p">,</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">column_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">attr_prop</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">NetworkNodeAttributeMetadata</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span> <span class="kc">None</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">attr_prop</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">attr_prop</span><span class="o">.</span><span class="n">computed_attribute</span><span class="p">:</span>
                <span class="n">node_columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_name</span><span class="p">)</span>

        <span class="n">node_list_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nodes_list</span><span class="p">])</span>

        <span class="n">nodes_table</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">arrow_table</span>  <span class="c1"># noqa</span>
        <span class="n">nodes_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">node_columns</span><span class="p">)</span><span class="si">}</span><span class="s2"> FROM nodes_table n WHERE n.</span><span class="si">{</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="si">}</span><span class="s2"> IN (</span><span class="si">{</span><span class="n">node_list_str</span><span class="si">}</span><span class="s2">)&quot;</span>

        <span class="n">nodes_result</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="n">nodes_query</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="p">()</span>

        <span class="n">edges_table</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">arrow_table</span>  <span class="c1"># noqa</span>
        <span class="n">edge_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">SOURCE_COLUMN_NAME</span><span class="p">,</span> <span class="n">TARGET_COLUMN_NAME</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">column_name</span><span class="p">,</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">column_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">attr_prop</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attr_prop</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">attr_prop</span><span class="o">.</span><span class="n">computed_attribute</span><span class="p">:</span>
                <span class="n">edge_columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_name</span><span class="p">)</span>

        <span class="n">edges_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">edge_columns</span><span class="p">)</span><span class="si">}</span><span class="s2"> FROM edges_table WHERE </span><span class="si">{</span><span class="n">SOURCE_COLUMN_NAME</span><span class="si">}</span><span class="s2"> IN (</span><span class="si">{</span><span class="n">node_list_str</span><span class="si">}</span><span class="s2">) OR </span><span class="si">{</span><span class="n">TARGET_COLUMN_NAME</span><span class="si">}</span><span class="s2"> IN (</span><span class="si">{</span><span class="n">node_list_str</span><span class="si">}</span><span class="s2">)&quot;</span>

        <span class="n">edges_result</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="n">edges_query</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="p">()</span>

        <span class="n">nodes_idx_colum</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nodes_result</span><span class="p">))</span>
        <span class="n">old_idx_column</span> <span class="o">=</span> <span class="n">nodes_result</span><span class="p">[</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">]</span>

        <span class="n">repl_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">old_idx_column</span><span class="o">.</span><span class="n">to_list</span><span class="p">(),</span> <span class="n">nodes_idx_colum</span><span class="p">))</span>
        <span class="n">nodes_result</span> <span class="o">=</span> <span class="n">nodes_result</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">)</span><span class="o">.</span><span class="n">map_dict</span><span class="p">(</span><span class="n">repl_map</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">edges_result</span> <span class="o">=</span> <span class="n">edges_result</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">SOURCE_COLUMN_NAME</span><span class="p">)</span><span class="o">.</span><span class="n">map_dict</span><span class="p">(</span><span class="n">repl_map</span><span class="p">),</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">TARGET_COLUMN_NAME</span><span class="p">)</span><span class="o">.</span><span class="n">map_dict</span><span class="p">(</span><span class="n">repl_map</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">filtered</span> <span class="o">=</span> <span class="n">NetworkData</span><span class="o">.</span><span class="n">create_network_data</span><span class="p">(</span>
            <span class="n">nodes_table</span><span class="o">=</span><span class="n">nodes_result</span><span class="p">,</span> <span class="n">edges_table</span><span class="o">=</span><span class="n">edges_result</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">filtered</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_from_networkx_graph</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">graph</span><span class="p">:</span> <span class="s2">&quot;nx.Graph&quot;</span><span class="p">,</span>
        <span class="n">label_attr_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ignore_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NetworkData&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a `NetworkData` instance from a networkx Graph object.&quot;&quot;&quot;</span>

        <span class="c1"># TODO: should we also index nodes/edges attributes?</span>

        <span class="n">nodes_table</span><span class="p">,</span> <span class="n">node_id_map</span> <span class="o">=</span> <span class="n">extract_networkx_nodes_as_table</span><span class="p">(</span>
            <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">,</span>
            <span class="n">label_attr_name</span><span class="o">=</span><span class="n">label_attr_name</span><span class="p">,</span>
            <span class="n">ignore_attributes</span><span class="o">=</span><span class="n">ignore_node_attributes</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">edges_table</span> <span class="o">=</span> <span class="n">extract_networkx_edges_as_table</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">node_id_map</span><span class="p">)</span>

        <span class="n">network_data</span> <span class="o">=</span> <span class="n">NetworkData</span><span class="o">.</span><span class="n">create_network_data</span><span class="p">(</span>
            <span class="n">nodes_table</span><span class="o">=</span><span class="n">nodes_table</span><span class="p">,</span> <span class="n">edges_table</span><span class="o">=</span><span class="n">edges_table</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">network_data</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">edges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraTable&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the edges table.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">EDGES_TABLE_NAME</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraTable&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the nodes table.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">NODES_TABLE_NAME</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">num_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the number of nodes in the network data.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">num_rows</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">num_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the number of edges in the network data.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">num_rows</span>

    <span class="k">def</span> <span class="nf">query_edges</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">sql_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">relation_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">EDGES_TABLE_NAME</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;pa.Table&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query the edges table using SQL.</span>

<span class="sd">        The table name to use in the query defaults to &#39;edges&#39;, but can be changed using the &#39;relation_name&#39; argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">duckdb</span>

        <span class="n">con</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">arrow_table</span>  <span class="c1"># noqak</span>
        <span class="k">if</span> <span class="n">relation_name</span> <span class="o">!=</span> <span class="n">EDGES_TABLE_NAME</span><span class="p">:</span>
            <span class="n">sql_query</span> <span class="o">=</span> <span class="n">sql_query</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">relation_name</span><span class="p">,</span> <span class="n">EDGES_TABLE_NAME</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql_query</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">arrow</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">query_nodes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">sql_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">relation_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">NODES_TABLE_NAME</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;pa.Table&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query the nodes table using SQL.</span>

<span class="sd">        The table name to use in the query defaults to &#39;nodes&#39;, but can be changed using the &#39;relation_name&#39; argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">duckdb</span>

        <span class="n">con</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">arrow_table</span>  <span class="c1"># noqa</span>
        <span class="k">if</span> <span class="n">relation_name</span> <span class="o">!=</span> <span class="n">NODES_TABLE_NAME</span><span class="p">:</span>
            <span class="n">sql_query</span> <span class="o">=</span> <span class="n">sql_query</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">relation_name</span><span class="p">,</span> <span class="n">NODES_TABLE_NAME</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql_query</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">arrow</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_calculate_node_attributes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">incl_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate the node attributes that should be included in the output.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">incl_node_attributes</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">node_attr_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">,</span> <span class="n">LABEL_COLUMN_NAME</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">all_node_attr_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">column_names</span>
            <span class="k">if</span> <span class="n">incl_node_attributes</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">node_attr_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">]</span>
                <span class="n">node_attr_names</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">all_node_attr_names</span> <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">NODE_ID_COLUMN_NAME</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">incl_node_attributes</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">incl_node_attributes</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_node_attr_names</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">KiaraException</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Can&#39;t include node attribute </span><span class="si">{</span><span class="n">incl_node_attributes</span><span class="si">}</span><span class="s2">: not part of the available attributes (</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_node_attr_names</span><span class="p">)</span><span class="si">}</span><span class="s2">).&quot;</span>
                    <span class="p">)</span>
                <span class="n">node_attr_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">,</span> <span class="n">incl_node_attributes</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">node_attr_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">attr_name</span> <span class="ow">in</span> <span class="n">incl_node_attributes</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">incl_node_attributes</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_node_attr_names</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">KiaraException</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Can&#39;t include node attribute </span><span class="si">{</span><span class="n">incl_node_attributes</span><span class="si">}</span><span class="s2">: not part of the available attributes (</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_node_attr_names</span><span class="p">)</span><span class="si">}</span><span class="s2">).&quot;</span>
                        <span class="p">)</span>
                    <span class="n">node_attr_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr_name</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">return</span> <span class="n">node_attr_names</span>

    <span class="k">def</span> <span class="nf">_calculate_edge_attributes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">incl_edge_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate the edge attributes that should be included in the output.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">incl_edge_attributes</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">edge_attr_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">SOURCE_COLUMN_NAME</span><span class="p">,</span> <span class="n">TARGET_COLUMN_NAME</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">all_edge_attr_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">column_names</span>
            <span class="k">if</span> <span class="n">incl_edge_attributes</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">edge_attr_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">SOURCE_COLUMN_NAME</span><span class="p">,</span> <span class="n">TARGET_COLUMN_NAME</span><span class="p">]</span>
                <span class="n">edge_attr_names</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                    <span class="p">(</span>
                        <span class="n">x</span>
                        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">all_edge_attr_names</span>
                        <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">SOURCE_COLUMN_NAME</span><span class="p">,</span> <span class="n">TARGET_COLUMN_NAME</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">incl_edge_attributes</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">incl_edge_attributes</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_edge_attr_names</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">KiaraException</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Can&#39;t include edge attribute </span><span class="si">{</span><span class="n">incl_edge_attributes</span><span class="si">}</span><span class="s2">: not part of the available attributes (</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_edge_attr_names</span><span class="p">)</span><span class="si">}</span><span class="s2">).&quot;</span>
                    <span class="p">)</span>
                <span class="n">edge_attr_names</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">SOURCE_COLUMN_NAME</span><span class="p">,</span>
                    <span class="n">TARGET_COLUMN_NAME</span><span class="p">,</span>
                    <span class="n">incl_edge_attributes</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">edge_attr_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">SOURCE_COLUMN_NAME</span><span class="p">,</span> <span class="n">TARGET_COLUMN_NAME</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">attr_name</span> <span class="ow">in</span> <span class="n">incl_edge_attributes</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">incl_edge_attributes</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_edge_attr_names</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">KiaraException</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Can&#39;t include edge attribute </span><span class="si">{</span><span class="n">incl_edge_attributes</span><span class="si">}</span><span class="s2">: not part of the available attributes (</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_edge_attr_names</span><span class="p">)</span><span class="si">}</span><span class="s2">).&quot;</span>
                        <span class="p">)</span>
                    <span class="n">edge_attr_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr_name</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">return</span> <span class="n">edge_attr_names</span>

    <span class="k">def</span> <span class="nf">retrieve_graph_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">nodes_callback</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">NodesCallback</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">edges_callback</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">EdgesCallback</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">incl_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">incl_edge_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">omit_self_loops</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve graph data from the sqlite database, and call the specified callbacks for each node and edge.</span>

<span class="sd">        First the nodes will be processed, then the edges, if that does not suit your needs you can just use this method twice, and set the callback you don&#39;t need to None.</span>

<span class="sd">        The nodes_callback will be called with the following arguments:</span>
<span class="sd">            - node_id: the id of the node (int)</span>
<span class="sd">            - if False: nothing else</span>
<span class="sd">            - if True: all node attributes, in the order they are defined in the table schema</span>
<span class="sd">            - if str: the value of the specified node attribute</span>
<span class="sd">            - if Iterable[str]: the values of the specified node attributes, in the order they are specified</span>

<span class="sd">        The edges_callback will be called with the following aruments:</span>
<span class="sd">            - source_id: the id of the source node (int)</span>
<span class="sd">            - target_id: the id of the target node (int)</span>
<span class="sd">            - if False: nothing else</span>
<span class="sd">            - if True: all edge attributes, in the order they are defined in the table schema</span>
<span class="sd">            - if str: the value of the specified edge attribute</span>
<span class="sd">            - if Iterable[str]: the values of the specified edge attributes, in the order they are specified</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">nodes_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">node_attr_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_node_attributes</span><span class="p">(</span><span class="n">incl_node_attributes</span><span class="p">)</span>

            <span class="n">nodes_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">to_polars_dataframe</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">nodes_df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">*</span><span class="n">node_attr_names</span><span class="p">)</span><span class="o">.</span><span class="n">rows</span><span class="p">(</span><span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                <span class="n">nodes_callback</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="n">edges_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">edge_attr_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_edge_attributes</span><span class="p">(</span><span class="n">incl_edge_attributes</span><span class="p">)</span>

            <span class="n">edges_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">to_polars_dataframe</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">edges_df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">*</span><span class="n">edge_attr_names</span><span class="p">)</span><span class="o">.</span><span class="n">rows</span><span class="p">(</span><span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">omit_self_loops</span>
                    <span class="ow">and</span> <span class="n">row</span><span class="p">[</span><span class="n">SOURCE_COLUMN_NAME</span><span class="p">]</span> <span class="o">==</span> <span class="n">row</span><span class="p">[</span><span class="n">TARGET_COLUMN_NAME</span><span class="p">]</span>
                <span class="p">):</span>
                    <span class="k">continue</span>
                <span class="n">edges_callback</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="nf">as_networkx_graph</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">graph_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">NETWORKX_GRAPH_TYPE</span><span class="p">],</span>
        <span class="n">incl_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">incl_edge_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">omit_self_loops</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NETWORKX_GRAPH_TYPE</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the network data as a networkx graph object.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            graph_type: the networkx Graph class to use</span>
<span class="sd">            incl_node_attributes: if True, all node attributes are included in the graph, if False, none are, otherwise the specified attributes are included</span>
<span class="sd">            incl_edge_attributes: if True, all edge attributes are included in the graph, if False, none are, otherwise the specified attributes are included</span>
<span class="sd">            omit_self_loops: if False, self-loops are included in the graph, otherwise they are not added to the resulting graph (nodes that are only connected to themselves are still included)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">graph</span> <span class="o">=</span> <span class="n">graph_type</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">add_node</span><span class="p">(</span><span class="n">_node_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">_node_id</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">add_edge</span><span class="p">(</span><span class="n">_source</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">_target</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">_source</span><span class="p">,</span> <span class="n">_target</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_graph_data</span><span class="p">(</span>
            <span class="n">nodes_callback</span><span class="o">=</span><span class="n">add_node</span><span class="p">,</span>
            <span class="n">edges_callback</span><span class="o">=</span><span class="n">add_edge</span><span class="p">,</span>
            <span class="n">incl_node_attributes</span><span class="o">=</span><span class="n">incl_node_attributes</span><span class="p">,</span>
            <span class="n">incl_edge_attributes</span><span class="o">=</span><span class="n">incl_edge_attributes</span><span class="p">,</span>
            <span class="n">omit_self_loops</span><span class="o">=</span><span class="n">omit_self_loops</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">graph</span>

    <span class="k">def</span> <span class="nf">as_rustworkx_graph</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">graph_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">RUSTWORKX_GRAPH_TYPE</span><span class="p">],</span>
        <span class="n">multigraph</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">incl_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">incl_edge_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">omit_self_loops</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">attach_node_id_map</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RUSTWORKX_GRAPH_TYPE</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the network data as a rustworkx graph object.</span>

<span class="sd">        Be aware that the node ids in the rustworks graph might not match up with the values of the _node_id column of</span>
<span class="sd">        the original network_data. The original _node_id will be set as an attribute (`_node_id`) on the nodes.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            graph_type: the rustworkx Graph class to use</span>
<span class="sd">            multigraph: if True, a Multi(Di)Graph is returned, otherwise a normal (Di)Graph</span>
<span class="sd">            incl_node_attributes: if True, all node attributes are included in the graph, if False, none are, otherwise the specified attributes are included</span>
<span class="sd">            incl_edge_attributes: if True, all edge attributes are included in the graph, if False, none are, otherwise the specified attributes are included</span>
<span class="sd">            omit_self_loops: if False, self-loops are included in the graph, otherwise they are not added to the resulting graph (nodes that are only connected to themselves are still included)</span>
<span class="sd">            attach_node_id_map: if True, add the dict describing how the graph node ids (key) are mapped to the original node id of the network data, under the &#39;node_id_map&#39; key in the graph&#39;s attributes</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">bidict</span> <span class="kn">import</span> <span class="n">bidict</span>

        <span class="n">graph</span> <span class="o">=</span> <span class="n">graph_type</span><span class="p">(</span><span class="n">multigraph</span><span class="o">=</span><span class="n">multigraph</span><span class="p">)</span>

        <span class="c1"># rustworkx uses 0-based integer indexes, so we don&#39;t neeed to look up the node ids (unless we want to</span>
        <span class="c1"># include node attributes)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_node_attributes</span><span class="p">(</span><span class="n">incl_node_attributes</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_edge_attributes</span><span class="p">(</span><span class="n">incl_edge_attributes</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span>

        <span class="c1"># we can use a &#39;global&#39; dict here because we know the nodes are processed before the edges</span>
        <span class="n">node_map</span><span class="p">:</span> <span class="n">bidict</span> <span class="o">=</span> <span class="n">bidict</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">add_node</span><span class="p">(</span><span class="n">_node_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">:</span> <span class="n">_node_id</span><span class="p">}</span>
            <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>

            <span class="n">graph_node_id</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="n">node_map</span><span class="p">[</span><span class="n">graph_node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">_node_id</span>
            <span class="c1"># if not _node_id == graph_node_id:</span>
            <span class="c1">#     raise Exception(&quot;Internal error: node ids don&#39;t match&quot;)</span>

        <span class="k">def</span> <span class="nf">add_edge</span><span class="p">(</span><span class="n">_source</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">_target</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>

            <span class="n">source</span> <span class="o">=</span> <span class="n">node_map</span><span class="p">[</span><span class="n">_source</span><span class="p">]</span>
            <span class="n">target</span> <span class="o">=</span> <span class="n">node_map</span><span class="p">[</span><span class="n">_target</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">attrs</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_graph_data</span><span class="p">(</span>
            <span class="n">nodes_callback</span><span class="o">=</span><span class="n">add_node</span><span class="p">,</span>
            <span class="n">edges_callback</span><span class="o">=</span><span class="n">add_edge</span><span class="p">,</span>
            <span class="n">incl_node_attributes</span><span class="o">=</span><span class="n">incl_node_attributes</span><span class="p">,</span>
            <span class="n">incl_edge_attributes</span><span class="o">=</span><span class="n">incl_edge_attributes</span><span class="p">,</span>
            <span class="n">omit_self_loops</span><span class="o">=</span><span class="n">omit_self_loops</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">attach_node_id_map</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;node_id_map&quot;</span><span class="p">:</span> <span class="n">node_map</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">graph</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





<h4 id="kiara_plugin.network_analysis.models.NetworkData-attributes">Attributes<a href="#kiara_plugin.network_analysis.models.NetworkData-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.edges" class="doc doc-heading">
<code class="highlight language-python"><span class="n">edges</span><span class="p">:</span> <span class="n">KiaraTable</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkData.edges" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Return the edges table.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.nodes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nodes</span><span class="p">:</span> <span class="n">KiaraTable</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkData.nodes" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Return the nodes table.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.num_nodes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">num_nodes</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkData.num_nodes" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Return the number of nodes in the network data.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.num_edges" class="doc doc-heading">
<code class="highlight language-python"><span class="n">num_edges</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkData.num_edges" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Return the number of edges in the network data.</p>
  </div>

</div>

<h4 id="kiara_plugin.network_analysis.models.NetworkData-functions">Functions<a href="#kiara_plugin.network_analysis.models.NetworkData-functions" class="headerlink" title="Permanent link">&para;</a></h4>


<div class="doc doc-object doc-function">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.create_network_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_network_data</span><span class="p">(</span><span class="n">nodes_table</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="p">,</span> <span class="n">edges_table</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="p">,</span> <span class="n">augment_tables</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nodes_column_metadata</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraModel</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">edges_column_metadata</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraModel</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NetworkData</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkData.create_network_data" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Create a <code>NetworkData</code> instance from two Arrow tables.</p>
<p>This method requires the nodes to have an "_id' column (int) as well as a '_label' one (utf8).
The edges table needs at least a '_source' (int) and '_target' (int) column.</p>
<p>This method will augment both tables with additional columns that are required for the internal representation (weights, degrees).</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_network_data</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">nodes_table</span><span class="p">:</span> <span class="s2">&quot;pa.Table&quot;</span><span class="p">,</span>
    <span class="n">edges_table</span><span class="p">:</span> <span class="s2">&quot;pa.Table&quot;</span><span class="p">,</span>
    <span class="n">augment_tables</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">nodes_column_metadata</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraModel</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">edges_column_metadata</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraModel</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NetworkData&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a `NetworkData` instance from two Arrow tables.</span>

<span class="sd">    This method requires the nodes to have an &quot;_id&#39; column (int) as well as a &#39;_label&#39; one (utf8).</span>
<span class="sd">    The edges table needs at least a &#39;_source&#39; (int) and &#39;_target&#39; (int) column.</span>

<span class="sd">    This method will augment both tables with additional columns that are required for the internal representation (weights, degrees).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">kiara_plugin.network_analysis.models.metadata</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">EDGE_COUNT_DUP_DIRECTED_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">EDGE_COUNT_DUP_UNDIRECTED_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">EDGE_ID_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">EDGE_IDX_DUP_DIRECTED_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">EDGE_IDX_DUP_UNDIRECTED_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">EDGE_SOURCE_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">EDGE_TARGET_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">NODE_COUND_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">NODE_COUNT_EDGES_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">NODE_COUNT_IN_EDGES_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">NODE_COUNT_IN_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">NODE_COUNT_OUT_EDGES_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">NODE_COUNT_OUT_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">NODE_ID_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">NODE_LABEL_COLUMN_METADATA</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">augment_tables</span><span class="p">:</span>
        <span class="n">edges_table</span> <span class="o">=</span> <span class="n">augment_edges_table_with_id_and_weights</span><span class="p">(</span><span class="n">edges_table</span><span class="p">)</span>
        <span class="n">nodes_table</span> <span class="o">=</span> <span class="n">augment_nodes_table_with_connection_counts</span><span class="p">(</span>
            <span class="n">nodes_table</span><span class="p">,</span> <span class="n">edges_table</span>
        <span class="p">)</span>

    <span class="n">network_data</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create_tables</span><span class="p">(</span>
        <span class="p">{</span><span class="n">NODES_TABLE_NAME</span><span class="p">:</span> <span class="n">nodes_table</span><span class="p">,</span> <span class="n">EDGES_TABLE_NAME</span><span class="p">:</span> <span class="n">edges_table</span><span class="p">}</span>
    <span class="p">)</span>

    <span class="c1"># set default column metadata</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">EDGE_ID_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">EDGE_ID_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">SOURCE_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">EDGE_SOURCE_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">TARGET_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">EDGE_TARGET_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">COUNT_DIRECTED_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">EDGE_COUNT_DUP_DIRECTED_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">COUNT_IDX_DIRECTED_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">EDGE_IDX_DUP_DIRECTED_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">COUNT_UNDIRECTED_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">EDGE_COUNT_DUP_UNDIRECTED_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">COUNT_IDX_UNDIRECTED_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">EDGE_IDX_DUP_UNDIRECTED_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">NODE_ID_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">NODE_ID_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">LABEL_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">NODE_LABEL_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">CONNECTIONS_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">NODE_COUNT_EDGES_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">CONNECTIONS_MULTI_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">NODE_COUND_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">IN_DIRECTED_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">NODE_COUNT_IN_EDGES_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">IN_DIRECTED_MULTI_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">NODE_COUNT_IN_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">OUT_DIRECTED_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">NODE_COUNT_OUT_EDGES_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
        <span class="n">OUT_DIRECTED_MULTI_COLUMN_NAME</span><span class="p">,</span>
        <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span>
        <span class="n">NODE_COUNT_OUT_EDGES_MULTI_COLUMN_METADATA</span><span class="p">,</span>
        <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">nodes_column_metadata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">col_name</span><span class="p">,</span> <span class="n">col_meta</span> <span class="ow">in</span> <span class="n">nodes_column_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">prop_value</span> <span class="ow">in</span> <span class="n">col_meta</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
                    <span class="n">col_name</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">prop_value</span><span class="p">,</span> <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">)</span>
    <span class="k">if</span> <span class="n">edges_column_metadata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">col_name</span><span class="p">,</span> <span class="n">col_meta</span> <span class="ow">in</span> <span class="n">edges_column_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">prop_value</span> <span class="ow">in</span> <span class="n">col_meta</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">set_column_metadata</span><span class="p">(</span>
                    <span class="n">col_name</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">prop_value</span><span class="p">,</span> <span class="n">overwrite_existing</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">)</span>

    <span class="k">return</span> <span class="n">network_data</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.from_filtered_nodes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_filtered_nodes</span><span class="p">(</span><span class="n">network_data</span><span class="p">:</span> <span class="n">NetworkData</span><span class="p">,</span> <span class="n">nodes_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">NetworkData</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkData.from_filtered_nodes" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_filtered_nodes</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">network_data</span><span class="p">:</span> <span class="s2">&quot;NetworkData&quot;</span><span class="p">,</span> <span class="n">nodes_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NetworkData&quot;</span><span class="p">:</span>

    <span class="kn">import</span> <span class="nn">duckdb</span>
    <span class="kn">import</span> <span class="nn">polars</span> <span class="k">as</span> <span class="nn">pl</span>

    <span class="n">node_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">,</span> <span class="n">LABEL_COLUMN_NAME</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">column_name</span><span class="p">,</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">column_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">attr_prop</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">NetworkNodeAttributeMetadata</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">attr_prop</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">attr_prop</span><span class="o">.</span><span class="n">computed_attribute</span><span class="p">:</span>
            <span class="n">node_columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_name</span><span class="p">)</span>

    <span class="n">node_list_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nodes_list</span><span class="p">])</span>

    <span class="n">nodes_table</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">arrow_table</span>  <span class="c1"># noqa</span>
    <span class="n">nodes_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">node_columns</span><span class="p">)</span><span class="si">}</span><span class="s2"> FROM nodes_table n WHERE n.</span><span class="si">{</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="si">}</span><span class="s2"> IN (</span><span class="si">{</span><span class="n">node_list_str</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="n">nodes_result</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="n">nodes_query</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="p">()</span>

    <span class="n">edges_table</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">arrow_table</span>  <span class="c1"># noqa</span>
    <span class="n">edge_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">SOURCE_COLUMN_NAME</span><span class="p">,</span> <span class="n">TARGET_COLUMN_NAME</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">column_name</span><span class="p">,</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">network_data</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">column_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">attr_prop</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ATTRIBUTE_PROPERTY_KEY</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">attr_prop</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">attr_prop</span><span class="o">.</span><span class="n">computed_attribute</span><span class="p">:</span>
            <span class="n">edge_columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_name</span><span class="p">)</span>

    <span class="n">edges_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">edge_columns</span><span class="p">)</span><span class="si">}</span><span class="s2"> FROM edges_table WHERE </span><span class="si">{</span><span class="n">SOURCE_COLUMN_NAME</span><span class="si">}</span><span class="s2"> IN (</span><span class="si">{</span><span class="n">node_list_str</span><span class="si">}</span><span class="s2">) OR </span><span class="si">{</span><span class="n">TARGET_COLUMN_NAME</span><span class="si">}</span><span class="s2"> IN (</span><span class="si">{</span><span class="n">node_list_str</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="n">edges_result</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="n">edges_query</span><span class="p">)</span><span class="o">.</span><span class="n">pl</span><span class="p">()</span>

    <span class="n">nodes_idx_colum</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nodes_result</span><span class="p">))</span>
    <span class="n">old_idx_column</span> <span class="o">=</span> <span class="n">nodes_result</span><span class="p">[</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">]</span>

    <span class="n">repl_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">old_idx_column</span><span class="o">.</span><span class="n">to_list</span><span class="p">(),</span> <span class="n">nodes_idx_colum</span><span class="p">))</span>
    <span class="n">nodes_result</span> <span class="o">=</span> <span class="n">nodes_result</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">)</span><span class="o">.</span><span class="n">map_dict</span><span class="p">(</span><span class="n">repl_map</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">edges_result</span> <span class="o">=</span> <span class="n">edges_result</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">SOURCE_COLUMN_NAME</span><span class="p">)</span><span class="o">.</span><span class="n">map_dict</span><span class="p">(</span><span class="n">repl_map</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">TARGET_COLUMN_NAME</span><span class="p">)</span><span class="o">.</span><span class="n">map_dict</span><span class="p">(</span><span class="n">repl_map</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">filtered</span> <span class="o">=</span> <span class="n">NetworkData</span><span class="o">.</span><span class="n">create_network_data</span><span class="p">(</span>
        <span class="n">nodes_table</span><span class="o">=</span><span class="n">nodes_result</span><span class="p">,</span> <span class="n">edges_table</span><span class="o">=</span><span class="n">edges_result</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">filtered</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.create_from_networkx_graph" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_from_networkx_graph</span><span class="p">(</span><span class="n">graph</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">,</span> <span class="n">label_attr_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NetworkData</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkData.create_from_networkx_graph" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Create a <code>NetworkData</code> instance from a networkx Graph object.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_from_networkx_graph</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">graph</span><span class="p">:</span> <span class="s2">&quot;nx.Graph&quot;</span><span class="p">,</span>
    <span class="n">label_attr_name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ignore_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NetworkData&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a `NetworkData` instance from a networkx Graph object.&quot;&quot;&quot;</span>

    <span class="c1"># TODO: should we also index nodes/edges attributes?</span>

    <span class="n">nodes_table</span><span class="p">,</span> <span class="n">node_id_map</span> <span class="o">=</span> <span class="n">extract_networkx_nodes_as_table</span><span class="p">(</span>
        <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">,</span>
        <span class="n">label_attr_name</span><span class="o">=</span><span class="n">label_attr_name</span><span class="p">,</span>
        <span class="n">ignore_attributes</span><span class="o">=</span><span class="n">ignore_node_attributes</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">edges_table</span> <span class="o">=</span> <span class="n">extract_networkx_edges_as_table</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">node_id_map</span><span class="p">)</span>

    <span class="n">network_data</span> <span class="o">=</span> <span class="n">NetworkData</span><span class="o">.</span><span class="n">create_network_data</span><span class="p">(</span>
        <span class="n">nodes_table</span><span class="o">=</span><span class="n">nodes_table</span><span class="p">,</span> <span class="n">edges_table</span><span class="o">=</span><span class="n">edges_table</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">network_data</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.query_edges" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query_edges</span><span class="p">(</span><span class="n">sql_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">relation_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">EDGES_TABLE_NAME</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span></code>

<a href="#kiara_plugin.network_analysis.models.NetworkData.query_edges" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Query the edges table using SQL.</p>
<p>The table name to use in the query defaults to 'edges', but can be changed using the 'relation_name' argument.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query_edges</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">sql_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">relation_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">EDGES_TABLE_NAME</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;pa.Table&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query the edges table using SQL.</span>

<span class="sd">    The table name to use in the query defaults to &#39;edges&#39;, but can be changed using the &#39;relation_name&#39; argument.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">duckdb</span>

    <span class="n">con</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">arrow_table</span>  <span class="c1"># noqak</span>
    <span class="k">if</span> <span class="n">relation_name</span> <span class="o">!=</span> <span class="n">EDGES_TABLE_NAME</span><span class="p">:</span>
        <span class="n">sql_query</span> <span class="o">=</span> <span class="n">sql_query</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">relation_name</span><span class="p">,</span> <span class="n">EDGES_TABLE_NAME</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql_query</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">arrow</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.query_nodes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query_nodes</span><span class="p">(</span><span class="n">sql_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">relation_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">NODES_TABLE_NAME</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span></code>

<a href="#kiara_plugin.network_analysis.models.NetworkData.query_nodes" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Query the nodes table using SQL.</p>
<p>The table name to use in the query defaults to 'nodes', but can be changed using the 'relation_name' argument.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query_nodes</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">sql_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">relation_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">NODES_TABLE_NAME</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;pa.Table&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query the nodes table using SQL.</span>

<span class="sd">    The table name to use in the query defaults to &#39;nodes&#39;, but can be changed using the &#39;relation_name&#39; argument.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">duckdb</span>

    <span class="n">con</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">arrow_table</span>  <span class="c1"># noqa</span>
    <span class="k">if</span> <span class="n">relation_name</span> <span class="o">!=</span> <span class="n">NODES_TABLE_NAME</span><span class="p">:</span>
        <span class="n">sql_query</span> <span class="o">=</span> <span class="n">sql_query</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">relation_name</span><span class="p">,</span> <span class="n">NODES_TABLE_NAME</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql_query</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">arrow</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.retrieve_graph_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_graph_data</span><span class="p">(</span><span class="n">nodes_callback</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">NodesCallback</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">edges_callback</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">EdgesCallback</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">incl_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">incl_edge_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">omit_self_loops</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span></code>

<a href="#kiara_plugin.network_analysis.models.NetworkData.retrieve_graph_data" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Retrieve graph data from the sqlite database, and call the specified callbacks for each node and edge.</p>
<p>First the nodes will be processed, then the edges, if that does not suit your needs you can just use this method twice, and set the callback you don't need to None.</p>

<details class="the-nodes_callback-will-be-called-with-the-following-arguments" open>
  <summary>The nodes_callback will be called with the following arguments</summary>
  <ul>
<li>node_id: the id of the node (int)</li>
<li>if False: nothing else</li>
<li>if True: all node attributes, in the order they are defined in the table schema</li>
<li>if str: the value of the specified node attribute</li>
<li>if Iterable[str]: the values of the specified node attributes, in the order they are specified</li>
</ul>
</details>
<details class="the-edges_callback-will-be-called-with-the-following-aruments" open>
  <summary>The edges_callback will be called with the following aruments</summary>
  <ul>
<li>source_id: the id of the source node (int)</li>
<li>target_id: the id of the target node (int)</li>
<li>if False: nothing else</li>
<li>if True: all edge attributes, in the order they are defined in the table schema</li>
<li>if str: the value of the specified edge attribute</li>
<li>if Iterable[str]: the values of the specified edge attributes, in the order they are specified</li>
</ul>
</details>
          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">retrieve_graph_data</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">nodes_callback</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">NodesCallback</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">edges_callback</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">EdgesCallback</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">incl_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">incl_edge_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">omit_self_loops</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve graph data from the sqlite database, and call the specified callbacks for each node and edge.</span>

<span class="sd">    First the nodes will be processed, then the edges, if that does not suit your needs you can just use this method twice, and set the callback you don&#39;t need to None.</span>

<span class="sd">    The nodes_callback will be called with the following arguments:</span>
<span class="sd">        - node_id: the id of the node (int)</span>
<span class="sd">        - if False: nothing else</span>
<span class="sd">        - if True: all node attributes, in the order they are defined in the table schema</span>
<span class="sd">        - if str: the value of the specified node attribute</span>
<span class="sd">        - if Iterable[str]: the values of the specified node attributes, in the order they are specified</span>

<span class="sd">    The edges_callback will be called with the following aruments:</span>
<span class="sd">        - source_id: the id of the source node (int)</span>
<span class="sd">        - target_id: the id of the target node (int)</span>
<span class="sd">        - if False: nothing else</span>
<span class="sd">        - if True: all edge attributes, in the order they are defined in the table schema</span>
<span class="sd">        - if str: the value of the specified edge attribute</span>
<span class="sd">        - if Iterable[str]: the values of the specified edge attributes, in the order they are specified</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">nodes_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">node_attr_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_node_attributes</span><span class="p">(</span><span class="n">incl_node_attributes</span><span class="p">)</span>

        <span class="n">nodes_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">to_polars_dataframe</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">nodes_df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">*</span><span class="n">node_attr_names</span><span class="p">)</span><span class="o">.</span><span class="n">rows</span><span class="p">(</span><span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="n">nodes_callback</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">if</span> <span class="n">edges_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">edge_attr_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_edge_attributes</span><span class="p">(</span><span class="n">incl_edge_attributes</span><span class="p">)</span>

        <span class="n">edges_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">to_polars_dataframe</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">edges_df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">*</span><span class="n">edge_attr_names</span><span class="p">)</span><span class="o">.</span><span class="n">rows</span><span class="p">(</span><span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">omit_self_loops</span>
                <span class="ow">and</span> <span class="n">row</span><span class="p">[</span><span class="n">SOURCE_COLUMN_NAME</span><span class="p">]</span> <span class="o">==</span> <span class="n">row</span><span class="p">[</span><span class="n">TARGET_COLUMN_NAME</span><span class="p">]</span>
            <span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">edges_callback</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.as_networkx_graph" class="doc doc-heading">
<code class="highlight language-python"><span class="n">as_networkx_graph</span><span class="p">(</span><span class="n">graph_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">NETWORKX_GRAPH_TYPE</span><span class="p">],</span> <span class="n">incl_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">incl_edge_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">omit_self_loops</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NETWORKX_GRAPH_TYPE</span></code>

<a href="#kiara_plugin.network_analysis.models.NetworkData.as_networkx_graph" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Return the network data as a networkx graph object.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>graph_type</code></td>
          <td>
                <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="kiara_plugin.network_analysis.models.NETWORKX_GRAPH_TYPE" href="#kiara_plugin.network_analysis.models.NETWORKX_GRAPH_TYPE">NETWORKX_GRAPH_TYPE</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the networkx Graph class to use</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>incl_node_attributes</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[bool, str, <span title="typing.Iterable">Iterable</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if True, all node attributes are included in the graph, if False, none are, otherwise the specified attributes are included</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>incl_edge_attributes</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[bool, str, <span title="typing.Iterable">Iterable</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if True, all edge attributes are included in the graph, if False, none are, otherwise the specified attributes are included</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>omit_self_loops</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if False, self-loops are included in the graph, otherwise they are not added to the resulting graph (nodes that are only connected to themselves are still included)</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">as_networkx_graph</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">graph_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">NETWORKX_GRAPH_TYPE</span><span class="p">],</span>
    <span class="n">incl_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">incl_edge_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">omit_self_loops</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NETWORKX_GRAPH_TYPE</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the network data as a networkx graph object.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        graph_type: the networkx Graph class to use</span>
<span class="sd">        incl_node_attributes: if True, all node attributes are included in the graph, if False, none are, otherwise the specified attributes are included</span>
<span class="sd">        incl_edge_attributes: if True, all edge attributes are included in the graph, if False, none are, otherwise the specified attributes are included</span>
<span class="sd">        omit_self_loops: if False, self-loops are included in the graph, otherwise they are not added to the resulting graph (nodes that are only connected to themselves are still included)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">graph</span> <span class="o">=</span> <span class="n">graph_type</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">add_node</span><span class="p">(</span><span class="n">_node_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">_node_id</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_edge</span><span class="p">(</span><span class="n">_source</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">_target</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">_source</span><span class="p">,</span> <span class="n">_target</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_graph_data</span><span class="p">(</span>
        <span class="n">nodes_callback</span><span class="o">=</span><span class="n">add_node</span><span class="p">,</span>
        <span class="n">edges_callback</span><span class="o">=</span><span class="n">add_edge</span><span class="p">,</span>
        <span class="n">incl_node_attributes</span><span class="o">=</span><span class="n">incl_node_attributes</span><span class="p">,</span>
        <span class="n">incl_edge_attributes</span><span class="o">=</span><span class="n">incl_edge_attributes</span><span class="p">,</span>
        <span class="n">omit_self_loops</span><span class="o">=</span><span class="n">omit_self_loops</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">graph</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h5 id="kiara_plugin.network_analysis.models.NetworkData.as_rustworkx_graph" class="doc doc-heading">
<code class="highlight language-python"><span class="n">as_rustworkx_graph</span><span class="p">(</span><span class="n">graph_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">RUSTWORKX_GRAPH_TYPE</span><span class="p">],</span> <span class="n">multigraph</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">incl_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">incl_edge_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">omit_self_loops</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">attach_node_id_map</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RUSTWORKX_GRAPH_TYPE</span></code>

<a href="#kiara_plugin.network_analysis.models.NetworkData.as_rustworkx_graph" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  
      <p>Return the network data as a rustworkx graph object.</p>
<p>Be aware that the node ids in the rustworks graph might not match up with the values of the _node_id column of
the original network_data. The original _node_id will be set as an attribute (<code>_node_id</code>) on the nodes.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>graph_type</code></td>
          <td>
                <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="kiara_plugin.network_analysis.models.RUSTWORKX_GRAPH_TYPE" href="#kiara_plugin.network_analysis.models.RUSTWORKX_GRAPH_TYPE">RUSTWORKX_GRAPH_TYPE</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the rustworkx Graph class to use</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>multigraph</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if True, a Multi(Di)Graph is returned, otherwise a normal (Di)Graph</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>incl_node_attributes</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[bool, str, <span title="typing.Iterable">Iterable</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if True, all node attributes are included in the graph, if False, none are, otherwise the specified attributes are included</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>incl_edge_attributes</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[bool, str, <span title="typing.Iterable">Iterable</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if True, all edge attributes are included in the graph, if False, none are, otherwise the specified attributes are included</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>omit_self_loops</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if False, self-loops are included in the graph, otherwise they are not added to the resulting graph (nodes that are only connected to themselves are still included)</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>attach_node_id_map</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if True, add the dict describing how the graph node ids (key) are mapped to the original node id of the network data, under the 'node_id_map' key in the graph's attributes</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">as_rustworkx_graph</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">graph_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">RUSTWORKX_GRAPH_TYPE</span><span class="p">],</span>
    <span class="n">multigraph</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">incl_node_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">incl_edge_attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">omit_self_loops</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">attach_node_id_map</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RUSTWORKX_GRAPH_TYPE</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the network data as a rustworkx graph object.</span>

<span class="sd">    Be aware that the node ids in the rustworks graph might not match up with the values of the _node_id column of</span>
<span class="sd">    the original network_data. The original _node_id will be set as an attribute (`_node_id`) on the nodes.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        graph_type: the rustworkx Graph class to use</span>
<span class="sd">        multigraph: if True, a Multi(Di)Graph is returned, otherwise a normal (Di)Graph</span>
<span class="sd">        incl_node_attributes: if True, all node attributes are included in the graph, if False, none are, otherwise the specified attributes are included</span>
<span class="sd">        incl_edge_attributes: if True, all edge attributes are included in the graph, if False, none are, otherwise the specified attributes are included</span>
<span class="sd">        omit_self_loops: if False, self-loops are included in the graph, otherwise they are not added to the resulting graph (nodes that are only connected to themselves are still included)</span>
<span class="sd">        attach_node_id_map: if True, add the dict describing how the graph node ids (key) are mapped to the original node id of the network data, under the &#39;node_id_map&#39; key in the graph&#39;s attributes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">bidict</span> <span class="kn">import</span> <span class="n">bidict</span>

    <span class="n">graph</span> <span class="o">=</span> <span class="n">graph_type</span><span class="p">(</span><span class="n">multigraph</span><span class="o">=</span><span class="n">multigraph</span><span class="p">)</span>

    <span class="c1"># rustworkx uses 0-based integer indexes, so we don&#39;t neeed to look up the node ids (unless we want to</span>
    <span class="c1"># include node attributes)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_node_attributes</span><span class="p">(</span><span class="n">incl_node_attributes</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_edge_attributes</span><span class="p">(</span><span class="n">incl_edge_attributes</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span>

    <span class="c1"># we can use a &#39;global&#39; dict here because we know the nodes are processed before the edges</span>
    <span class="n">node_map</span><span class="p">:</span> <span class="n">bidict</span> <span class="o">=</span> <span class="n">bidict</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">add_node</span><span class="p">(</span><span class="n">_node_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">NODE_ID_COLUMN_NAME</span><span class="p">:</span> <span class="n">_node_id</span><span class="p">}</span>
        <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>

        <span class="n">graph_node_id</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">node_map</span><span class="p">[</span><span class="n">graph_node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">_node_id</span>
        <span class="c1"># if not _node_id == graph_node_id:</span>
        <span class="c1">#     raise Exception(&quot;Internal error: node ids don&#39;t match&quot;)</span>

    <span class="k">def</span> <span class="nf">add_edge</span><span class="p">(</span><span class="n">_source</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">_target</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>

        <span class="n">source</span> <span class="o">=</span> <span class="n">node_map</span><span class="p">[</span><span class="n">_source</span><span class="p">]</span>
        <span class="n">target</span> <span class="o">=</span> <span class="n">node_map</span><span class="p">[</span><span class="n">_target</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">attrs</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_graph_data</span><span class="p">(</span>
        <span class="n">nodes_callback</span><span class="o">=</span><span class="n">add_node</span><span class="p">,</span>
        <span class="n">edges_callback</span><span class="o">=</span><span class="n">add_edge</span><span class="p">,</span>
        <span class="n">incl_node_attributes</span><span class="o">=</span><span class="n">incl_node_attributes</span><span class="p">,</span>
        <span class="n">incl_edge_attributes</span><span class="o">=</span><span class="n">incl_edge_attributes</span><span class="p">,</span>
        <span class="n">omit_self_loops</span><span class="o">=</span><span class="n">omit_self_loops</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">attach_node_id_map</span><span class="p">:</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;node_id_map&quot;</span><span class="p">:</span> <span class="n">node_map</span><span class="p">}</span>

    <span class="k">return</span> <span class="n">graph</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="kiara_plugin.network_analysis.models.GraphProperties" class="doc doc-heading">
          <code>GraphProperties</code>


<a href="#kiara_plugin.network_analysis.models.GraphProperties" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>

  
      <p>Properties of graph data, if interpreted as a specific graph type.</p>

            <details class="quote">
              <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">GraphProperties</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Properties of graph data, if interpreted as a specific graph type.&quot;&quot;&quot;</span>

    <span class="n">number_of_edges</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of edges.&quot;</span><span class="p">)</span>
    <span class="n">parallel_edges</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of parallel edges (if &#39;multi&#39; graph type).&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





<h4 id="kiara_plugin.network_analysis.models.GraphProperties-attributes">Attributes<a href="#kiara_plugin.network_analysis.models.GraphProperties-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="kiara_plugin.network_analysis.models.GraphProperties.number_of_edges" class="doc doc-heading">
<code class="highlight language-python"><span class="n">number_of_edges</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;The number of edges.&#39;</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.GraphProperties.number_of_edges" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="kiara_plugin.network_analysis.models.GraphProperties.parallel_edges" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parallel_edges</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of parallel edges (if &#39;multi&#39; graph type).&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.GraphProperties.parallel_edges" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  </div>

</div>





  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="kiara_plugin.network_analysis.models.NetworkGraphProperties" class="doc doc-heading">
          <code>NetworkGraphProperties</code>


<a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-external" title="kiara.models.values.value_metadata.ValueMetadata" href="https://dharpa.org/kiara/latest/reference/kiara/models/values/value_metadata/__init__/#kiara.models.values.value_metadata.ValueMetadata">ValueMetadata</a></code></p>

  
      <p>Network data stats.</p>

            <details class="quote">
              <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">NetworkGraphProperties</span><span class="p">(</span><span class="n">ValueMetadata</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Network data stats.&quot;&quot;&quot;</span>

    <span class="n">_metadata_key</span> <span class="o">=</span> <span class="s2">&quot;network_data&quot;</span>

    <span class="n">number_of_nodes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of nodes in the network graph.&quot;</span><span class="p">)</span>
    <span class="n">properties_by_graph_type</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span>  <span class="c1"># type: ignore</span>
        <span class="n">Literal</span><span class="p">[</span>
            <span class="n">GraphType</span><span class="o">.</span><span class="n">DIRECTED</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="n">GraphType</span><span class="o">.</span><span class="n">UNDIRECTED</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="n">GraphType</span><span class="o">.</span><span class="n">UNDIRECTED_MULTI</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="n">GraphType</span><span class="o">.</span><span class="n">DIRECTED_MULTI</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">GraphProperties</span><span class="p">,</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Properties of the network data, by graph type.&quot;</span><span class="p">)</span>
    <span class="n">number_of_self_loops</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of edges where source and target point to the same node.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_supported_data_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;network_data&quot;</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_value_metadata</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NetworkGraphProperties&quot;</span><span class="p">:</span>

        <span class="n">network_data</span><span class="p">:</span> <span class="n">NetworkData</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">data</span>

        <span class="n">num_rows</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">num_nodes</span>
        <span class="n">num_edges</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">num_edges</span>

        <span class="c1"># query_num_edges_directed = f&quot;SELECT COUNT(*) FROM (SELECT DISTINCT {SOURCE_COLUMN_NAME}, {TARGET_COLUMN_NAME} FROM {EDGES_TABLE_NAME})&quot;</span>
        <span class="n">query_num_edges_directed</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT COUNT(*) FROM </span><span class="si">{</span><span class="n">EDGES_TABLE_NAME</span><span class="si">}</span><span class="s2"> WHERE </span><span class="si">{</span><span class="n">COUNT_IDX_DIRECTED_COLUMN_NAME</span><span class="si">}</span><span class="s2"> = 1&quot;</span>

        <span class="n">num_edges_directed_result</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">query_edges</span><span class="p">(</span><span class="n">query_num_edges_directed</span><span class="p">)</span>
        <span class="n">num_edges_directed</span> <span class="o">=</span> <span class="n">num_edges_directed_result</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>

        <span class="n">query_num_edges_undirected</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT COUNT(*) FROM </span><span class="si">{</span><span class="n">EDGES_TABLE_NAME</span><span class="si">}</span><span class="s2"> WHERE </span><span class="si">{</span><span class="n">COUNT_IDX_UNDIRECTED_COLUMN_NAME</span><span class="si">}</span><span class="s2"> = 1&quot;</span>
        <span class="n">num_edges_undirected_result</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">query_edges</span><span class="p">(</span>
            <span class="n">query_num_edges_undirected</span>
        <span class="p">)</span>
        <span class="n">num_edges_undirected</span> <span class="o">=</span> <span class="n">num_edges_undirected_result</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>

        <span class="n">self_loop_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT count(*) FROM </span><span class="si">{</span><span class="n">EDGES_TABLE_NAME</span><span class="si">}</span><span class="s2"> WHERE </span><span class="si">{</span><span class="n">SOURCE_COLUMN_NAME</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">TARGET_COLUMN_NAME</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">self_loop_result</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">query_edges</span><span class="p">(</span><span class="n">self_loop_query</span><span class="p">)</span>
        <span class="n">num_self_loops</span> <span class="o">=</span> <span class="n">self_loop_result</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>

        <span class="n">num_parallel_edges_directed_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT COUNT(*) FROM </span><span class="si">{</span><span class="n">EDGES_TABLE_NAME</span><span class="si">}</span><span class="s2"> WHERE </span><span class="si">{</span><span class="n">COUNT_IDX_DIRECTED_COLUMN_NAME</span><span class="si">}</span><span class="s2"> = 2&quot;</span>
        <span class="n">num_parallel_edges_directed_result</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">query_edges</span><span class="p">(</span>
            <span class="n">num_parallel_edges_directed_query</span>
        <span class="p">)</span>
        <span class="n">num_parallel_edges_directed</span> <span class="o">=</span> <span class="n">num_parallel_edges_directed_result</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span>
            <span class="mi">0</span>
        <span class="p">]</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>

        <span class="n">num_parallel_edges_undirected_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT COUNT(*) FROM </span><span class="si">{</span><span class="n">EDGES_TABLE_NAME</span><span class="si">}</span><span class="s2"> WHERE </span><span class="si">{</span><span class="n">COUNT_IDX_UNDIRECTED_COLUMN_NAME</span><span class="si">}</span><span class="s2"> = 2&quot;</span>
        <span class="n">num_parallel_edges_undirected_result</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">query_edges</span><span class="p">(</span>
            <span class="n">num_parallel_edges_undirected_query</span>
        <span class="p">)</span>
        <span class="n">num_parallel_edges_undirected</span> <span class="o">=</span> <span class="n">num_parallel_edges_undirected_result</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span>
            <span class="mi">0</span>
        <span class="p">]</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>

        <span class="n">directed_props</span> <span class="o">=</span> <span class="n">GraphProperties</span><span class="p">(</span><span class="n">number_of_edges</span><span class="o">=</span><span class="n">num_edges_directed</span><span class="p">)</span>
        <span class="n">undirected_props</span> <span class="o">=</span> <span class="n">GraphProperties</span><span class="p">(</span><span class="n">number_of_edges</span><span class="o">=</span><span class="n">num_edges_undirected</span><span class="p">)</span>
        <span class="n">directed_multi_props</span> <span class="o">=</span> <span class="n">GraphProperties</span><span class="p">(</span>
            <span class="n">number_of_edges</span><span class="o">=</span><span class="n">num_edges</span><span class="p">,</span> <span class="n">parallel_edges</span><span class="o">=</span><span class="n">num_parallel_edges_directed</span>
        <span class="p">)</span>
        <span class="n">undirected_multi_props</span> <span class="o">=</span> <span class="n">GraphProperties</span><span class="p">(</span>
            <span class="n">number_of_edges</span><span class="o">=</span><span class="n">num_edges</span><span class="p">,</span> <span class="n">parallel_edges</span><span class="o">=</span><span class="n">num_parallel_edges_undirected</span>
        <span class="p">)</span>

        <span class="n">props</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">GraphType</span><span class="o">.</span><span class="n">DIRECTED</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">directed_props</span><span class="p">,</span>
            <span class="n">GraphType</span><span class="o">.</span><span class="n">DIRECTED_MULTI</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">directed_multi_props</span><span class="p">,</span>
            <span class="n">GraphType</span><span class="o">.</span><span class="n">UNDIRECTED</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">undirected_props</span><span class="p">,</span>
            <span class="n">GraphType</span><span class="o">.</span><span class="n">UNDIRECTED_MULTI</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">undirected_multi_props</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">number_of_nodes</span><span class="o">=</span><span class="n">num_rows</span><span class="p">,</span>
            <span class="n">properties_by_graph_type</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
            <span class="n">number_of_self_loops</span><span class="o">=</span><span class="n">num_self_loops</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





<h4 id="kiara_plugin.network_analysis.models.NetworkGraphProperties-attributes">Attributes<a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties-attributes" class="headerlink" title="Permanent link">&para;</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="kiara_plugin.network_analysis.models.NetworkGraphProperties.number_of_nodes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">number_of_nodes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Number of nodes in the network graph.&#39;</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties.number_of_nodes" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="kiara_plugin.network_analysis.models.NetworkGraphProperties.properties_by_graph_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">properties_by_graph_type</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="n">GraphType</span><span class="o">.</span><span class="n">DIRECTED</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">GraphType</span><span class="o">.</span><span class="n">UNDIRECTED</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">GraphType</span><span class="o">.</span><span class="n">UNDIRECTED_MULTI</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">GraphType</span><span class="o">.</span><span class="n">DIRECTED_MULTI</span><span class="o">.</span><span class="n">value</span><span class="p">],</span> <span class="n">GraphProperties</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Properties of the network data, by graph type.&#39;</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties.properties_by_graph_type" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="kiara_plugin.network_analysis.models.NetworkGraphProperties.number_of_self_loops" class="doc doc-heading">
<code class="highlight language-python"><span class="n">number_of_self_loops</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Number of edges where source and target point to the same node.&#39;</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties.number_of_self_loops" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">
  </div>

</div>

<h4 id="kiara_plugin.network_analysis.models.NetworkGraphProperties-functions">Functions<a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties-functions" class="headerlink" title="Permanent link">&para;</a></h4>


<div class="doc doc-object doc-function">



<h5 id="kiara_plugin.network_analysis.models.NetworkGraphProperties.retrieve_supported_data_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_supported_data_types</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties.retrieve_supported_data_types" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_supported_data_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;network_data&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h5 id="kiara_plugin.network_analysis.models.NetworkGraphProperties.create_value_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_value_metadata</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NetworkGraphProperties</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara_plugin.network_analysis.models.NetworkGraphProperties.create_value_metadata" class="headerlink" title="Permanent link">&para;</a></h5>


  <div class="doc doc-contents ">

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.4/x64/lib/python3.11/site-packages/kiara_plugin/network_analysis/models/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_value_metadata</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NetworkGraphProperties&quot;</span><span class="p">:</span>

    <span class="n">network_data</span><span class="p">:</span> <span class="n">NetworkData</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">data</span>

    <span class="n">num_rows</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">num_nodes</span>
    <span class="n">num_edges</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">num_edges</span>

    <span class="c1"># query_num_edges_directed = f&quot;SELECT COUNT(*) FROM (SELECT DISTINCT {SOURCE_COLUMN_NAME}, {TARGET_COLUMN_NAME} FROM {EDGES_TABLE_NAME})&quot;</span>
    <span class="n">query_num_edges_directed</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT COUNT(*) FROM </span><span class="si">{</span><span class="n">EDGES_TABLE_NAME</span><span class="si">}</span><span class="s2"> WHERE </span><span class="si">{</span><span class="n">COUNT_IDX_DIRECTED_COLUMN_NAME</span><span class="si">}</span><span class="s2"> = 1&quot;</span>

    <span class="n">num_edges_directed_result</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">query_edges</span><span class="p">(</span><span class="n">query_num_edges_directed</span><span class="p">)</span>
    <span class="n">num_edges_directed</span> <span class="o">=</span> <span class="n">num_edges_directed_result</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>

    <span class="n">query_num_edges_undirected</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT COUNT(*) FROM </span><span class="si">{</span><span class="n">EDGES_TABLE_NAME</span><span class="si">}</span><span class="s2"> WHERE </span><span class="si">{</span><span class="n">COUNT_IDX_UNDIRECTED_COLUMN_NAME</span><span class="si">}</span><span class="s2"> = 1&quot;</span>
    <span class="n">num_edges_undirected_result</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">query_edges</span><span class="p">(</span>
        <span class="n">query_num_edges_undirected</span>
    <span class="p">)</span>
    <span class="n">num_edges_undirected</span> <span class="o">=</span> <span class="n">num_edges_undirected_result</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>

    <span class="n">self_loop_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT count(*) FROM </span><span class="si">{</span><span class="n">EDGES_TABLE_NAME</span><span class="si">}</span><span class="s2"> WHERE </span><span class="si">{</span><span class="n">SOURCE_COLUMN_NAME</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">TARGET_COLUMN_NAME</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">self_loop_result</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">query_edges</span><span class="p">(</span><span class="n">self_loop_query</span><span class="p">)</span>
    <span class="n">num_self_loops</span> <span class="o">=</span> <span class="n">self_loop_result</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>

    <span class="n">num_parallel_edges_directed_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT COUNT(*) FROM </span><span class="si">{</span><span class="n">EDGES_TABLE_NAME</span><span class="si">}</span><span class="s2"> WHERE </span><span class="si">{</span><span class="n">COUNT_IDX_DIRECTED_COLUMN_NAME</span><span class="si">}</span><span class="s2"> = 2&quot;</span>
    <span class="n">num_parallel_edges_directed_result</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">query_edges</span><span class="p">(</span>
        <span class="n">num_parallel_edges_directed_query</span>
    <span class="p">)</span>
    <span class="n">num_parallel_edges_directed</span> <span class="o">=</span> <span class="n">num_parallel_edges_directed_result</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span>
        <span class="mi">0</span>
    <span class="p">]</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>

    <span class="n">num_parallel_edges_undirected_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT COUNT(*) FROM </span><span class="si">{</span><span class="n">EDGES_TABLE_NAME</span><span class="si">}</span><span class="s2"> WHERE </span><span class="si">{</span><span class="n">COUNT_IDX_UNDIRECTED_COLUMN_NAME</span><span class="si">}</span><span class="s2"> = 2&quot;</span>
    <span class="n">num_parallel_edges_undirected_result</span> <span class="o">=</span> <span class="n">network_data</span><span class="o">.</span><span class="n">query_edges</span><span class="p">(</span>
        <span class="n">num_parallel_edges_undirected_query</span>
    <span class="p">)</span>
    <span class="n">num_parallel_edges_undirected</span> <span class="o">=</span> <span class="n">num_parallel_edges_undirected_result</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span>
        <span class="mi">0</span>
    <span class="p">]</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>

    <span class="n">directed_props</span> <span class="o">=</span> <span class="n">GraphProperties</span><span class="p">(</span><span class="n">number_of_edges</span><span class="o">=</span><span class="n">num_edges_directed</span><span class="p">)</span>
    <span class="n">undirected_props</span> <span class="o">=</span> <span class="n">GraphProperties</span><span class="p">(</span><span class="n">number_of_edges</span><span class="o">=</span><span class="n">num_edges_undirected</span><span class="p">)</span>
    <span class="n">directed_multi_props</span> <span class="o">=</span> <span class="n">GraphProperties</span><span class="p">(</span>
        <span class="n">number_of_edges</span><span class="o">=</span><span class="n">num_edges</span><span class="p">,</span> <span class="n">parallel_edges</span><span class="o">=</span><span class="n">num_parallel_edges_directed</span>
    <span class="p">)</span>
    <span class="n">undirected_multi_props</span> <span class="o">=</span> <span class="n">GraphProperties</span><span class="p">(</span>
        <span class="n">number_of_edges</span><span class="o">=</span><span class="n">num_edges</span><span class="p">,</span> <span class="n">parallel_edges</span><span class="o">=</span><span class="n">num_parallel_edges_undirected</span>
    <span class="p">)</span>

    <span class="n">props</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">GraphType</span><span class="o">.</span><span class="n">DIRECTED</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">directed_props</span><span class="p">,</span>
        <span class="n">GraphType</span><span class="o">.</span><span class="n">DIRECTED_MULTI</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">directed_multi_props</span><span class="p">,</span>
        <span class="n">GraphType</span><span class="o">.</span><span class="n">UNDIRECTED</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">undirected_props</span><span class="p">,</span>
        <span class="n">GraphType</span><span class="o">.</span><span class="n">UNDIRECTED_MULTI</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">undirected_multi_props</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">result</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">number_of_nodes</span><span class="o">=</span><span class="n">num_rows</span><span class="p">,</span>
        <span class="n">properties_by_graph_type</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
        <span class="n">number_of_self_loops</span><span class="o">=</span><span class="n">num_self_loops</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>
<h2 id="kiara_plugin.network_analysis.models-functions">Functions<a href="#kiara_plugin.network_analysis.models-functions" class="headerlink" title="Permanent link">&para;</a></h2>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.tracking"], "search": "../../../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>